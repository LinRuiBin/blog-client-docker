webpackJsonp([10],{"3K7L":function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={};t.d(o,"setInfo",function(){return k});var r={};t.d(r,"userInfo",function(){return I});var a=t("MVMM"),u={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"layout-bg"}),this._v(" "),n("router-view",{staticClass:"main"})],1)},staticRenderFns:[]};var i=t("Z0/y")({name:"App"},u,!1,function(e){t("3K7L")},null,null).exports,l=t("zO6J"),s=function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,"V10o"))};a.default.use(l.a);var c=new l.a({routes:[{path:"/",name:"index",component:function(){return t.e(2).then(t.bind(null,"8/c5"))},redirect:"/home",children:[{path:"home",component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"NvXN"))},meta:{keepAlive:!0}},{path:"posts",component:function(){return Promise.all([t.e(0),t.e(7)]).then(t.bind(null,"tO5f"))}},{path:"post",component:s},{path:"writepost",component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,"lTj4"))}},{path:"about",component:function(){return t.e(6).then(t.bind(null,"xMlv"))},meta:{keepAlive:!0}},{path:"postDetail",component:s}]},{path:"/login",name:"login",component:function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,"pWJn"))}},{path:"/register",name:"register",component:function(){return t.e(5).then(t.bind(null,"PWvr"))}}]}),f=t("9rMa"),p=t("a3Yh"),d=t.n(p),m=t("aozt"),h=t.n(m),v=t("VKKs");a.default.prototype.$http=h.a;var g=d()({},"SET_INFO",function(e){e.userInfo={name:Object(v.a)("name"),token:Object(v.a)("token")},console.log("缓存token"+e.userInfo)});var b,k=(b="SET_INFO",console.log("vuex 保存"+b),function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return e.commit.apply(void 0,[b].concat(t))}),I=function(e){return e.userInfo};a.default.use(f.a);var w=new f.a.Store({state:{login:!1,userInfo:{name:"",token:"",avatar:""}},actions:o,mutations:g,getters:r}),y=t("xYCT"),M=t.n(y),P=t("lJzc"),T=t.n(P),x=t("GLlk"),K=t.n(x),N=t("Klf7"),O=t.n(N),_=(t("x1Tb"),t("nnDH")),j=t.n(_),S=(t("yyMc"),t("rVsN")),A=t.n(S);h.a.interceptors.request.use(function(e){return w.state.userInfo.token&&(e.headers.Authorization="JWT "+w.state.userInfo.token,console.log("带上获得token"+w.state.userInfo.token)),e},function(e){return A.a.reject(e)}),h.a.interceptors.response.use(void 0,function(e){switch(e.response.status){case 401:c.replace({path:"/login",query:{redirect:c.currentRoute.fullPath}});break;case 403:console.log("您没有该操作权限");break;case 500:console.log("服务器错误")}return A.a.reject(e.response.data)}),a.default.prototype.$http=h.a,a.default.use(M.a),a.default.config.productionTip=!1,a.default.use(K.a),a.default.use(O.a),a.default.use(j.a),a.default.use(T.a,{}),new a.default({el:"#app",store:w,router:c,render:function(e){return e(i)}})},VKKs:function(e,n,t){"use strict";t.d(n,"c",function(){return a}),t.d(n,"a",function(){return u}),t.d(n,"b",function(){return i});var o=t("3cXf"),r=t.n(o),a=function(e,n){e&&("string"!=typeof n&&(n=r()(n)),console.log("保存"+e+":"+n),window.localStorage.setItem(e,n))},u=function(e){if(e)return console.log("获取："+e),window.localStorage.getItem(e)},i=function(e){e&&(console.log("删除："+e),window.localStorage.removeItem(e))}},x1Tb:function(e,n){},yyMc:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.357eb842be16ffbb582e.js.map